(function(t){function e(e){for(var n,s,i=e[0],c=e[1],u=e[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,s=1;s<o.length;s++){var c=o[s];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},r={app:0},a=[];function s(t){return i.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"9d5511e8"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(t){var e=[],o=r[t];if(0!==o)if(o)e.push(o[2]);else{var n=new Promise((function(e,n){o=r[t]=[e,n]}));e.push(o[2]=n);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(t);var u=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(l);var o=r[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,o[1](u)}r[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/desktop/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("85ec"),r=o.n(n);r.a},"4c99":function(t,e,o){},5272:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[t.isLoggedIn?o("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[t.isLoggedIn?t._e():o("b-navbar-brand",{attrs:{href:"/login"}},[t._v("Login")]),o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",[o("b-dropdown",{attrs:{variant:"primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[o("b-icon",{attrs:{icon:"pencil-square"}}),t._v("Masters ")]},proxy:!0}],null,!1,232493187)},[o("b-dropdown-item-button",[o("b-icon",{attrs:{icon:"card-checklist","aria-hidden":"true"}}),t._v("Options Master "),o("span",{staticClass:"sr-only"},[t._v("(Click to unlock)")])],1),o("b-dropdown-divider"),o("b-dropdown-item-button",[o("b-icon",{attrs:{icon:"person-check","aria-hidden":"true"}}),t._v("Acount Master "),o("span",{staticClass:"sr-only"},[t._v("(Click to unlock)")])],1)],1),o("b-dropdown",{attrs:{variant:"primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[o("b-icon",{attrs:{icon:"briefcase"}}),t._v("Transactions ")]},proxy:!0}],null,!1,2646084452)},[o("b-dropdown-item-button",[t._v("Bookings")]),o("b-dropdown-divider"),o("b-dropdown-item-button",[t._v("Recipts")]),o("b-dropdown-divider"),o("b-dropdown-item-button",[t._v("Booking Details")])],1),o("b-nav-form",[o("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Account Search"}}),o("b-button",{staticStyle:{color:"#fff",padding:"0px","padding-right":"4px","margin-top":"4px"},attrs:{size:"lg",variant:"link"}},[o("b-icon",{attrs:{icon:"search","aria-hidden":"true"}}),o("span",{staticClass:"sr-only"},[t._v("Search")])],1)],1),o("b-nav-form",[o("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Booking Search"}}),o("b-button",{staticClass:"mb-2",staticStyle:{color:"#fff",padding:"0px","margin-top":"14px"},attrs:{size:"lg",variant:"link"}},[o("b-icon",{attrs:{icon:"search","aria-hidden":"true"}}),o("span",{staticClass:"sr-only"},[t._v("Search")])],1)],1)],1),t.isLoggedIn?o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-dropdown",{attrs:{variant:"primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[o("b-avatar",{attrs:{src:"http://localhost:8182/images/"+t.username+".jpg"}}),t._v(" "+t._s(t.username)+" ")]},proxy:!0}],null,!1,607767448)},[o("b-dropdown-item-button",{on:{click:t.logout}},[o("b-icon",{attrs:{icon:"power","aria-hidden":"true"}}),t._v("Logout "),o("span",{staticClass:"sr-only"},[t._v("(Click to unlock)")])],1)],1)],1):t._e()],1)],1):t._e(),o("router-view")],1)},a=[],s={data:function(){return{}},methods:{forword:function(){this.$router.push("/")},logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/login")}))}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},username:function(){return this.$store.state.user.username}}},i=s,c=(o("034f"),o("2877")),u=Object(c["a"])(i,r,a,!1,null,null,null),l=u.exports,d=o("9483");Object(d["a"])("".concat("/desktop/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});o("45fc"),o("d3b7");var p=o("8c4f"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},f=[],h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("h1",[t._v(t._s(t.msg))])])},b=[],v={name:"HelloWorld",props:{msg:String}},g=v,y=(o("5d06"),Object(c["a"])(g,h,b,!1,null,"43f48a4c",null)),w=y.exports,k={name:"Home",components:{HelloWorld:w}},_=k,C=Object(c["a"])(_,m,f,!1,null,null,null),S=C.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-card",{staticStyle:{margin:"0 auto","padding-top":"25px","margin-top":"25px"}},[o("div",[o("div",{staticClass:"col wrapper-box"},[o("p",{staticClass:"wrapper-box__title text-center"},[t._v("Sign in")]),o("div",[o("form",{staticClass:"form form-newaccount",attrs:{id:"loginForm"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"inputUser"}},[t._v("E-mail")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"inputPassword"}},[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"inputPassword",type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),o("div",{staticClass:"custom-control custom-checkbox pull-right"},[o("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck1"}}),o("label",{staticClass:"custom-control-label",attrs:{for:"customCheck1"}},[t._v("Remember password")])]),o("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[t._v("Login")]),o("hr"),o("router-link",{staticClass:"text-link d-block text-right",attrs:{to:"/register"}},[t._v("No account yet?")])],1)])])]),o("b-modal",{ref:"companyModal",attrs:{id:"modal-company",size:"lg","hide-header":"","hide-footer":""}},[o("b-card",{attrs:{title:"Company Selection"}},[o("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[o("b-row",[o("b-col",[o("b-form-group",{attrs:{label:"Company","label-for":"company",state:t.companyState,"invalid-feedback":"Company is Required"}},[o("b-form-select",{staticClass:"mb-3",attrs:{required:"",state:t.companyState,id:"company",options:t.company},on:{change:t.checkFormValidity},scopedSlots:t._u([{key:"first",fn:function(){return[o("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select a Company --")])]},proxy:!0}]),model:{value:t.selectedComp,callback:function(e){t.selectedComp=e},expression:"selectedComp"}})],1)],1)],1),o("b-row",[o("b-col",{staticStyle:{"text-align":"center !important"}},[o("b-button",{attrs:{variant:"primary text-center",disabled:null==t.selectCompany},on:{click:t.selectCompany}},[t._v("Select")])],1)],1)],1)])],1)],1)},P=[],$=(o("7db0"),{data:function(){return{email:"",password:"",company:[],selectedComp:null,companyState:null}},methods:{checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.companyState=t,t},selectCompany:function(){var t=this;if(this.checkFormValidity()){if(null!==this.selectedComp){var e=this.company.find((function(e){return e.value===t.selectedComp}));this.$store.dispatch("userComp",e)}else this.$router.push("/logout");this.$bvModal.hide("modal-company"),this.$router.push("/about")}},login:function(){var t=this,e=this.email,o=this.password,n=this.$loading.show({loader:"bars",color:"green"});this.$store.dispatch("login",{username:e,password:o}).then((function(){t.$store.dispatch("master").then((function(e){t.company=e,n.hide(),t.$store.state.user.isAdmin?t.$bvModal.show("modal-company"):t.$router.push("/")})).catch((function(t){return alert(t)}))})).catch((function(t){return alert(t)}))}}}),O=$,j=(o("b5fe"),Object(c["a"])(O,x,P,!1,null,"298f1f0d",null)),A=j.exports,I=o("2f62"),L=o("bc3a"),E=o.n(L),q=o("0e44");n["default"].use(I["a"]);var M=new I["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{},master:{},selectedCompany:{}},plugins:[Object(q["a"])()],mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.token=e.token,t.user=e.user},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.user={},t.master={},t.selectedCompany={}},masterData:function(t,e){t.master=e},userData:function(t,e){t.user=e},userComp:function(t,e){t.selectedCompany=e}},actions:{login:function(t,e){var o=t.commit;return new Promise((function(t,n){o("auth_request"),E.a.post("/desktop/oauth/token",e).then((function(e){var n=e.data.body.details.tokenValue,r=e.data.body.userAuthentication.principal;r.isAdmin=!1;var a=r.authorities;(a.some((function(t){return"ROLE_SUPER"===t.authority}))||a.some((function(t){return"ROLE_ADMIN"===t.authority})))&&(r.isAdmin=!0);var s={token:n,user:r};n="Bearer "+n,localStorage.setItem("token",n),E.a.defaults.headers.common["Authorization"]=n,o("auth_success",s),t(e)})).catch((function(t){o("auth_error"),localStorage.removeItem("token"),n(t)}))}))},register:function(t,e){var o=t.commit;return new Promise((function(t,n){o("auth_request"),E()({url:"http://localhost:8182/security/register",data:e,method:"POST"}).then((function(e){var n=e.data.token,r=e.data.user;localStorage.setItem("token",n),E.a.defaults.headers.common["Authorization"]=n,o("auth_success",n,r),t(e)})).catch((function(t){o("auth_error",t),localStorage.removeItem("token"),n(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){e("logout"),localStorage.removeItem("token"),delete E.a.defaults.headers.common["Authorization"],t()}))},userData:function(t){var e=t.commit;return new Promise((function(t,o){E.a.get("/security/users/user-details").then((function(o){e("userData",o.data),t(o.data)})).catch((function(t){e("auth_error",t),localStorage.removeItem("token"),o(t)}))}))},userComp:function(t,e){var o=t.commit;o("userComp",e)},master:function(t){var e=t.commit;return new Promise((function(t,o){E.a.get("/middleware/api/secured/get-masterdata").then((function(o){e("masterData",o.data),t(o.data.company)})).catch((function(t){e("auth_error",t),localStorage.removeItem("token"),o(t)}))}))}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}});n["default"].use(p["a"]);var z=[{path:"/",name:"Home",component:S,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:A},{path:"/about",name:"About",meta:{requiresAuth:!0},component:function(){return o.e("about").then(o.bind(null,"f820"))}}],D=new p["a"]({mode:"history",base:"/desktop/",routes:z});D.beforeEach((function(t,e,o){if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(M.getters.isLoggedIn)return void o();o("/login")}else o()}));var N=D,T=o("5f5b"),F=o("b1e0"),R=(o("f9e3"),o("2dd8"),o("9062")),V=o.n(R);o("e40d");n["default"].use(V.a),n["default"].prototype.$http=E.a,n["default"].use(T["a"]),n["default"].use(F["a"]);var B=localStorage.getItem("token");B&&(n["default"].prototype.$http.defaults.headers.common["Authorization"]=B),n["default"].config.productionTip=!1,new n["default"]({router:N,store:M,Loading:V.a,render:function(t){return t(l)}}).$mount("#app")},"5d06":function(t,e,o){"use strict";var n=o("5272"),r=o.n(n);r.a},"85ec":function(t,e,o){},b5fe:function(t,e,o){"use strict";var n=o("4c99"),r=o.n(n);r.a}});
//# sourceMappingURL=app.e644f8d2.js.map